<?xml version="1.0" encoding="UTF-8"?><record_update table="sysauto_script">
    <sysauto_script action="INSERT_OR_UPDATE">
        <active>true</active>
        <condition/>
        <conditional>false</conditional>
        <name>Testing - Housekeeping</name>
        <run_as/>
        <run_as_tz/>
        <run_dayofmonth>1</run_dayofmonth>
        <run_dayofweek>1</run_dayofweek>
        <run_period/>
        <run_start>2020-06-05 08:18:00</run_start>
        <run_time>1970-01-01 00:00:00</run_time>
        <run_type>on_demand</run_type>
        <script><![CDATA[var tbl = 'x_tekso_twxapp01_cmdb_deletes';
new x_tekso_twxapp01.HouseKeeping().deleteRecordsCreatedEarlierThanNDaysAgo(tbl,5);

tbl = 'x_tekso_twxapp01_cmdb_updates';
new x_tekso_twxapp01.HouseKeeping().deleteRecordsCreatedEarlierThanNDaysAgo(tbl,5);

tbl = 'x_tekso_twxapp01_debug_log';
new x_tekso_twxapp01.HouseKeeping().deleteRecordsCreatedEarlierThanNDaysAgo(tbl,5);

//Only where status is Test Data Build Complete or New or Unsubmitted
//Need a cleanup job to change Test Data Build In Progress to Unsubmitted
tbl = 'x_tekso_twxapp01_generate_test_data';
new x_tekso_twxapp01.HouseKeeping().deleteRecordsCreatedEarlierThanNDaysAgo(tbl,5);

//Aborted, Pending, Processed, Sent, Timed Out
//Need a cleanup job to change Sent to Timed Out
//Also need to retain the last 5 records
tbl = 'x_tekso_twxapp01_connection_test';
new x_tekso_twxapp01.HouseKeeping().deleteRecordsCreatedEarlierThanNDaysAgo(tbl,5);

//Need a cleanup job where records sent is false or records processed = false
//Delete only where records processed = true, need to retain last N records, need to retain the record that is linked to //Setup
tbl = 'x_tekso_twxapp01_processing_log';
new x_tekso_twxapp01.HouseKeeping().deleteRecordsCreatedEarlierThanNDaysAgo(tbl,5);

//Need a cleanup job where records sent is true but records processed = false
//Delete only where records processed = true, need to retain last N records, need to retain the record that is linked to //Setup â€“ and should only deleted if related processing log records have been removed
tbl = 'x_tekso_twxapp01_scheduled_job_log';
new x_tekso_twxapp01.HouseKeeping().deleteRecordsCreatedEarlierThanNDaysAgo(tbl,5);


//Need a cleanup job where status is Processing
//Delete only where status is Processed, need to retain last N records
//x_tekso_twxapp01_cmdb_changes

//x_tekso_twxapp01_cmdb_link_to_rest_data
//Only Delete if x_tekso_twxapp01_cmdb_changes record is Processed (or has been deleted)

//x_tekso_twxapp01_rest_data_to_ucontrol
//Only Deleted if Response Received = true

]]></script>
        <sys_class_name>sysauto_script</sys_class_name>
        <sys_created_by>robin</sys_created_by>
        <sys_created_on>2020-06-05 08:39:00</sys_created_on>
        <sys_id>5cdba094db59d0504f29252b139619d2</sys_id>
        <sys_mod_count>33</sys_mod_count>
        <sys_name>Testing - Housekeeping</sys_name>
        <sys_package display_value="Application 1" source="x_tekso_twxapp01">993be4b2db62085035a38a72399619a7</sys_package>
        <sys_policy/>
        <sys_scope display_value="Application 1">993be4b2db62085035a38a72399619a7</sys_scope>
        <sys_update_name>sysauto_script_5cdba094db59d0504f29252b139619d2</sys_update_name>
        <sys_updated_by>robin</sys_updated_by>
        <sys_updated_on>2020-06-23 17:39:09</sys_updated_on>
        <upgrade_safe>false</upgrade_safe>
    </sysauto_script>
</record_update>
